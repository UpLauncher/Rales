From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Rai san <admin@raic.tech>
Date: Thu, 16 May 2024 16:55:50 +0900
Subject: [PATCH] feat: Add WTP Config


diff --git a/src/main/java/tech/raic/RalesConfig.java b/src/main/java/tech/raic/RalesConfig.java
index a9b3d4e39fd0d8983d69dc4aa18048b5d3cee3ed..fd9261a3a490337a174a99283b2f0cfad10ca79c 100644
--- a/src/main/java/tech/raic/RalesConfig.java
+++ b/src/main/java/tech/raic/RalesConfig.java
@@ -37,22 +37,13 @@ import static org.bukkit.Bukkit.getServer;
 
 @SuppressWarnings("unused")
 public class RalesConfig {
-    private static final String HEADER = "This is the main configuration file for Purpur.\n"
-            + "As you can see, there's tons to configure. Some options may impact gameplay, so use\n"
-            + "with caution, and make sure you know what each option does before configuring.\n"
-            + "\n"
-            + "If you need help with the configuration or have any questions related to Purpur,\n"
-            + "join us in our Discord guild.\n"
-            + "\n"
-            + "Website: https://purpurmc.org \n"
-            + "Docs: https://purpurmc.org/docs \n";
+    private static final String HEADER = "これは、Rales の設定ファイルです。";
     private static File CONFIG_FILE;
     public static YamlConfiguration config;
 
     private static Map<String, Command> commands;
 
     public static int version;
-    static boolean verbose;
 
     public static void init(File configFile) {
         CONFIG_FILE = configFile;
@@ -66,7 +57,6 @@ public class RalesConfig {
         }
         config.options().header(HEADER);
         config.options().copyDefaults(true);
-        verbose = getBoolean("verbose", false);
 
         commands = new HashMap<>();
         commands.put("rales", new RalesCommand("rales"));
@@ -79,12 +69,6 @@ public class RalesConfig {
         Blocks.rebuildCache();
     }
 
-    protected static void log(String s) {
-        if (verbose) {
-            log(Level.INFO, s);
-        }
-    }
-
     protected static void log(Level level, String s) {
         Bukkit.getLogger().log(level, s);
     }
@@ -143,7 +127,23 @@ public class RalesConfig {
         return config.getInt(path, config.getInt(path));
     }
 
-    private static <T> List<?> getList(String path, T def) {
+    public static boolean enabled = true;
+    public static String title = "ようこそ！";
+    public static String subTitle = "サーバーに参加しました。";
+    public static int fadeIn = 20;
+    public static int showTime = 70;
+    public static int fadeOut = 20;
+
+    private static void welcomeTitle() {
+        enabled = getBoolean("settings.wt.enabled", enabled);
+        title = getString("settings.wt.title", title);
+        subTitle = getString("settings.wt.sub-title", subTitle);
+        fadeIn = getInt("settings.wt.fade-in", fadeIn);
+        showTime = getInt("settings.wt.show-time", showTime);
+        fadeOut = getInt("settings.wt.fade-out", fadeOut);
+    }
+
+        private static <T> List<?> getList(String path, T def) {
         config.addDefault(path, def);
         return config.getList(path, config.getList(path));
     }
diff --git a/src/main/java/tech/raic/wtp/PlayerJoined.java b/src/main/java/tech/raic/wtp/PlayerJoined.java
index d965e6c49b39a453b1d23054ead5d15822789258..f8aaf5dd76ca699c3e1b03b1421e71781a25d787 100644
--- a/src/main/java/tech/raic/wtp/PlayerJoined.java
+++ b/src/main/java/tech/raic/wtp/PlayerJoined.java
@@ -6,16 +6,18 @@ import org.bukkit.event.Listener;
 import org.bukkit.event.player.PlayerJoinEvent;
 
 import net.md_5.bungee.api.ChatColor;
+import tech.raic.RalesConfig;
 
 public class PlayerJoined {
     public void onPlayerJoin(Player player) {
-            var title = "a"; //wt.getConfig().getString("welcome-title.title");
-            var subtitle = "a"; //wt.getConfig().getString("welcome-title.sub-title");
-            var fadein = 20; //Integer.parseInt(wt.getConfig().getString("welcome-title.fadein"));
-            var stay = 70; //Integer.parseInt(wt.getConfig().getString("welcome-title.time"));
-            var fadeout = 20; //Integer.parseInt(wt.getConfig().getString("welcome-title.fadeout"));
+        RalesConfig ralesConfig = new RalesConfig();
+        String title = ralesConfig.title;
+        String subTitle = ralesConfig.subTitle;
+        int fadeIn = ralesConfig.fadeIn;
+        int showTime = ralesConfig.showTime;
+        int fadeOut = ralesConfig.fadeOut;
 
-            player.sendTitle(ChatColor.translateAlternateColorCodes('&', title),
-                    ChatColor.translateAlternateColorCodes('&', subtitle), fadein, stay, fadeout);
+        player.sendTitle(ChatColor.translateAlternateColorCodes('&', title),
+            ChatColor.translateAlternateColorCodes('&', subTitle), fadeIn, showTime, fadeOut);
     }
 }
